# Jarvis 기획서

## 개요

Jarvis는 **비정형 데이터를 자동 분류·보강·관리하는 지능형 데이터 파이프라인 시스템**이다.

텍스트, 음성, 웹 크롤링 등 다중 소스에서 유입되는 비정형 데이터를 자동으로 수집·전처리·분류·적재하며, PostgreSQL + pgvector 기반의 통합 저장소에서 관계형 데이터와 벡터 검색을 동시에 지원한다.

## 핵심 기능

### F1. 토픽 추출 엔진
- 비정형 입력에서 독립적인 주제를 식별/분리
- 하나의 입력 → 다수의 토픽 추출 가능

### F2. 클러스터 관리
- 기존 클러스터와 시맨틱 매칭
- 신규 클러스터 자동 생성 (계층 구조 포함)
- 클러스터 간 관계 매핑

### F3. AI 정보 보강
- 웹 검색 기반 객관적 정보 자동 삽입
- 사용자 감상/의견의 맥락적 구체화
- 사용자 성향 학습 기반 자연스러운 확장

### F4. 시맨틱 검색 & 회상
- 벡터 기반 시맨틱 검색
- 모호한 질문으로도 관련 기록 검색
- "이거 맞나?" 형태의 확인형 회상 지원

### F5. 실시간 캡처
- 음성 녹음 → 트랜스크립션
- 실시간 토픽 감지 및 분류
- 회의 중 멀티 프로젝트 내용 자동 분리

### F6. 문서 자동 생성
- 추출/보강된 내용으로 구조화된 문서 생성
- Git 기반 버전 관리
- 시점 기반 커밋 (최초 언급 시점 = 초기 커밋)

### F7. 웹 모니터링 & 자동 알림
- URL + 감시 조건 등록 → 주기적 크롤링
- 변경/신규 감지 시 알림 + 자동 문서화
- 사용자 프로필 기반 맞춤 필터링 ("나한테 맞는 것만")

## 시스템 아키텍처

```
[입력 레이어]
  텍스트 / 음성(STT) / 웹 모니터링 트리거
        ↓
[처리 파이프라인]
  토픽 추출 → 클러스터 매칭 → 정보 보강 → 문서 생성
        ↓
[저장 레이어]
  문서 저장소 (Git) + 벡터 DB (시맨틱 검색)
        ↓
[검색/회상 레이어]
  시맨틱 검색 + 사용자 컨텍스트 매칭

[백그라운드 레이어]
  웹 모니터링 스케줄러 → 크롤링 → 변경 감지 → 알림 + 파이프라인 트리거
```

## 기술 스택

### Backend
| 구성 | 기술 | 선정 이유 |
|---|---|---|
| 프레임워크 | **FastAPI** (Python) | 데이터 파이프라인/NLP/벡터 검색 생태계 전체가 Python |
| 비동기 처리 | **Celery + Redis** | 웹 크롤링, LLM 호출 등 장시간 작업 비동기 처리 |
| 스케줄링 | **Celery Beat** | 웹 모니터링 주기적 크롤링 스케줄러 |
| 웹 크롤링 | **Playwright** | JS 렌더링 필요한 사이트 대응 (비교과시스템 등) |

### Database (빅데이터 핵심)
| 구성 | 기술 | 선정 이유 |
|---|---|---|
| 메인 DB | **PostgreSQL** | 관계형 데이터 (사용자, 클러스터, 문서 메타데이터) |
| 벡터 검색 | **pgvector** 확장 | 별도 벡터 DB 없이 PostgreSQL에서 시맨틱 검색 지원 |
| 전문 검색 | **PostgreSQL FTS** | 한국어 형태소 분석 기반 전문 검색 |
| 캐시 | **Redis** | 세션, 크롤링 결과 캐시, Celery 브로커 겸용 |

> **빅데이터 관점 포인트**: PostgreSQL 단일 엔진에서 관계형 쿼리 + 벡터 유사도 검색 + 전문 검색을 통합 처리. 비정형 데이터의 구조화와 검색 고도화가 핵심 기술 과제.

### Frontend
| 구성 | 기술 |
|---|---|
| 프레임워크 | **React** + **TypeScript** |
| 상태 관리 | TBD (Zustand / Tanstack Query 등) |
| UI | TBD |

### AI / NLP (파이프라인 컴포넌트)
| 구성 | 기술 | 역할 |
|---|---|---|
| LLM | **OpenAI API** (또는 대안) | 토픽 추출, 텍스트 보강, 클러스터 판단 |
| 임베딩 | **OpenAI Embeddings** | 문서 벡터화 → pgvector 저장 |
| STT | **Whisper API** | 음성 → 텍스트 변환 |

### Infra
| 구성 | 기술 |
|---|---|
| 배포 | **CloudType** |
| 컨테이너 | **Docker** |
| 버전 관리 | **Git** (문서 이력 관리 포함) |

### 전체 아키텍처 (빅데이터 관점)

```
┌─────────────────────────────────────────────────────────┐
│                     입력 소스 (다중)                       │
│  [텍스트 입력]  [음성 녹음]  [웹 크롤링]  [모니터링 트리거]    │
└──────────┬──────────┬──────────┬──────────┬──────────────┘
           │          │          │          │
           ▼          ▼          ▼          ▼
┌─────────────────────────────────────────────────────────┐
│              데이터 수집 & 전처리 레이어                     │
│  FastAPI 엔드포인트 / Celery 비동기 워커                    │
│  - STT 변환                                              │
│  - 텍스트 정규화                                          │
│  - 크롤링 데이터 파싱                                      │
└──────────────────────┬──────────────────────────────────┘
                       ▼
┌─────────────────────────────────────────────────────────┐
│              데이터 처리 파이프라인                          │
│  - 토픽 추출 (LLM)                                       │
│  - 클러스터 매칭 (pgvector 유사도 검색)                     │
│  - 정보 보강 (웹 검색 + LLM)                               │
│  - 문서 생성 & 임베딩 벡터화                                │
└──────────────────────┬──────────────────────────────────┘
                       ▼
┌─────────────────────────────────────────────────────────┐
│              PostgreSQL 통합 저장소                        │
│  ┌──────────┐ ┌──────────────┐ ┌──────────────────┐     │
│  │ 관계형    │ │ pgvector     │ │ Full-Text Search │     │
│  │ 메타데이터│ │ 벡터 인덱스   │ │ 전문 검색 인덱스  │     │
│  └──────────┘ └──────────────┘ └──────────────────┘     │
└──────────────────────┬──────────────────────────────────┘
                       ▼
┌─────────────────────────────────────────────────────────┐
│              검색 & 회상 엔진                              │
│  시맨틱 검색 (pgvector) + 키워드 검색 (FTS) + 하이브리드    │
└─────────────────────────────────────────────────────────┘

[백그라운드]
  Celery Beat 스케줄러 → 웹 모니터링 워커 → 변경 감지 → 알림 + 파이프라인 재진입
  Redis: 작업 큐 + 캐시 + 크롤링 상태 관리
```

## 캡스톤 빅데이터 트랙 포지셔닝

이 프로젝트의 빅데이터 기술 과제:

1. **비정형 데이터 파이프라인 설계**: 텍스트/음성/웹 등 이질적 소스의 통합 수집·전처리
2. **PostgreSQL 확장 활용**: pgvector + FTS로 단일 DB에서 다차원 검색 지원
3. **자동 데이터 분류/클러스터링**: 벡터 유사도 기반 실시간 데이터 분류
4. **스케줄 기반 배치 처리**: 웹 모니터링 크롤링 + 변경 감지 파이프라인
5. **데이터 버전 관리**: Git 기반 문서 이력 추적 시스템

> AI/LLM은 파이프라인 내 전처리·분류 단계의 도구일 뿐, 프로젝트의 본질은 **비정형 데이터의 자동 수집·분류·저장·검색 시스템 구축**에 있다.

## 개발 로드맵

(추후 확정)
